<link href="https://fonts.googleapis.com/css2?family=K2D:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.cdnfonts.com/css/source-sans-pro" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">



<header class="navbar"> 
   <a href="/home" class="logo">
      <img src="/images/logo.png" alt="BrainElevate Logo" />

    </a>
 
  <div class="nav-left">
    
    <!-- Logo -->
  
  

    <!-- Search bar -->
     
  <% if (referralLink  ) { %>
    
<form method="GET" action="/courses" class="d-flex search-form">
  <input type="text" name="search" class="form-control" 
         placeholder="Search courses..." 
         value="<%= (typeof selectedFilters !== 'undefined' && selectedFilters.search) ? selectedFilters.search : '' %>"
         onkeypress="if(event.key === 'Enter'){ this.form.submit(); }">

  <!-- Preserve other filters if selectedFilters exists -->
  <% if (typeof selectedFilters !== 'undefined' && selectedFilters) { %>
    <% if (selectedFilters.categories) { selectedFilters.categories.forEach(cat => { %>
      <input type="hidden" name="categories" value="<%= cat %>">
    <% }) } %>

    <% if (selectedFilters.rating) { selectedFilters.rating.forEach(r => { %>
      <input type="hidden" name="rating" value="<%= r %>">
    <% }) } %>

    <% if (selectedFilters.level) { selectedFilters.level.forEach(l => { %>
      <input type="hidden" name="level" value="<%= l %>">
    <% }) } %>

    <% if (selectedFilters.price) { selectedFilters.price.forEach(p => { %>
      <input type="hidden" name="price" value="<%= p %>">
    <% }) } %>

    <% if (selectedFilters.duration) { selectedFilters.duration.forEach(d => { %>
      <input type="hidden" name="duration" value="<%= d %>">
    <% }) } %>
  <% } %>
</form>


      <% } %>
  </div>
    <button class="menu-toggle" id="menuToggle">â˜°</button>
  <div class="nav-right me-4">
 
  <a href="/career">Teach on BrainElevate</a>
  <a href="/courses">Courses</a>

  <% if (referralLink) { %>
    <!-- Show only when user is logged in -->
     <a href="#" id="referNow">Refer Now</a>
    <a href="/mylearning">My Learning</a>
    <a href="/wishlist"><i class="fa fa-heart"></i></a>
    <a href="/cart"><i class="fa fa-shopping-cart"></i></a>
    <a href="/profile"><i class="fa fa-user"></i></a>
     
  <% } else { %>
    <!-- Show when user is NOT logged in -->
    <a href="/login">Login</a>
  <a class="btn join-btn" href="/signup">Join for free</a>
  <% } %>
</div>

  <!-- Hidden Popup for Referral -->
<div id="referPopup" class="popup" style="display:none;">
  <div class="popup-content">
<h3>Invite Your Friends & Earn Rewards!</h3>
  <p>Share your referral link with friends and earn ðŸ¥³ðŸ¥³ðŸŽ‡<strong >ðŸ’µðŸ’µâ‚¹100 cashback</strong> when they make their first purchase.</p>

 <% if (referralLink) { %>
  <input 
    type="text" 
    id="referralLink" 
    readonly 
    value="<%= referralLink %>" 
  />
  <button class="btn btn-dark" id="copyReferral">Copy Link</button>
  <button class="btn btn-danger" id="closePopup">Close</button>
<% } %> 
  </div>
</div>

<script>
  const referNow = document.getElementById("referNow");
  const popup = document.getElementById("referPopup");
  const closePopup = document.getElementById("closePopup");
  const copyBtn = document.getElementById("copyReferral");
  const referralInput = document.getElementById("referralLink");

  // Open popup
  referNow.addEventListener("click", (e) => {
    e.preventDefault();
    popup.style.display = "flex";
  });

  // Close popup
  closePopup.addEventListener("click", () => {
    popup.style.display = "none";
  });

  // Copy referral link
  copyBtn.addEventListener("click", () => {
    referralInput.select();
    document.execCommand("copy");
    copyBtn.textContent = "Copied!";
    setTimeout(() => (copyBtn.textContent = "Copy Link"), 2000);
  });

  
</script>
<script>document.getElementById("menuToggle").addEventListener("click", () => {
  document.querySelector(".nav-right").classList.toggle("show");
});
</script>

</header>
